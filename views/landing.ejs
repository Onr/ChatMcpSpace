<div class="landing-stars opacity-20"></div>

<!-- Background Logo -->
<div class="fixed inset-0 flex items-center justify-center pointer-events-none z-0 overflow-hidden">
  <svg class="w-[80vmin] h-[80vmin] opacity-10 animate-spin-slow" viewBox="0 0 256 256"
    xmlns="http://www.w3.org/2000/svg">
    <!-- Central command center -->
    <circle cx="128" cy="128" r="56" fill="none" stroke="#22d3ee" stroke-width="4" />

    <!-- Inner thin orbit ring (middle circle) -->
    <circle cx="128" cy="128" r="72" fill="none" stroke="#0891b2" stroke-width="2" />

    <!-- Outer thin orbit ring -->
    <circle cx="128" cy="128" r="88" fill="none" stroke="#06b6d4" stroke-width="3" />

    <!-- Eight agent dots: in / out / out / in / out / out / out / out -->

    <!-- 0: IN (top, inner ring) -->
    <circle cx="128" cy="56" r="7" fill="#22d3ee" />

    <!-- 1: OUT (top-right, outer ring) -->
    <circle cx="190.2" cy="65.8" r="7" fill="#14b8a6" />

    <!-- 2: OUT (right, outer ring) -->
    <circle cx="216" cy="128" r="7" fill="#22d3ee" />

    <!-- 3: IN (bottom-right, inner ring) -->
    <circle cx="178.9" cy="178.9" r="7" fill="#14b8a6" />

    <!-- 4: OUT (bottom, outer ring) -->
    <circle cx="128" cy="216" r="7" fill="#22d3ee" />

    <!-- 5: OUT (bottom-left, outer ring) -->
    <circle cx="65.8" cy="190.2" r="7" fill="#14b8a6" />

    <!-- 6: OUT (left, outer ring) -->
    <circle cx="40" cy="128" r="7" fill="#22d3ee" />

    <!-- 7: OUT (top-left, outer ring) -->
    <circle cx="65.8" cy="65.8" r="7" fill="#14b8a6" />
  </svg>
</div>

<!-- Minimal Header -->
<header class="fixed top-0 left-0 right-0 z-50 px-6 py-6 transition-all duration-300">
  <nav class="max-w-5xl mx-auto flex items-center justify-between">
    <!-- Branding -->
    <a href="/" class="flex items-center gap-2 hover:opacity-80 transition-opacity">
      <svg class="w-8 h-8 flex-shrink-0" viewBox="0 0 256 256" xmlns="http://www.w3.org/2000/svg">
        <!-- Central command center -->
        <circle cx="128" cy="128" r="56" fill="none" stroke="#22d3ee" stroke-width="4" />
        <!-- Inner thin orbit ring -->
        <circle cx="128" cy="128" r="72" fill="none" stroke="#0891b2" stroke-width="2" />
        <!-- Outer thin orbit ring -->
        <circle cx="128" cy="128" r="88" fill="none" stroke="#06b6d4" stroke-width="3" />
        <!-- Eight agent dots -->
        <circle cx="128" cy="56" r="7" fill="#22d3ee" />
        <circle cx="190.2" cy="65.8" r="7" fill="#14b8a6" />
        <circle cx="216" cy="128" r="7" fill="#22d3ee" />
        <circle cx="178.9" cy="178.9" r="7" fill="#14b8a6" />
        <circle cx="128" cy="216" r="7" fill="#22d3ee" />
        <circle cx="65.8" cy="190.2" r="7" fill="#14b8a6" />
        <circle cx="40" cy="128" r="7" fill="#22d3ee" />
        <circle cx="65.8" cy="65.8" r="7" fill="#14b8a6" />
      </svg>
      <span class="hidden sm:inline font-bold uppercase tracking-[0.15em] text-emerald-500/80">Chat MCP Space</span>
    </a>
    <!-- Sign in link -->
    <button onclick="scrollToAuth('login')" class="text-sm text-slate-400 hover:text-white transition-colors">
      Sign In
    </button>
  </nav>
</header>

<div class="min-h-screen flex flex-col relative z-10">

  <!-- Hero: Clean & Minimal -->
  <section class="flex-1 flex flex-col justify-center items-center pt-16 pb-8 px-6 text-center">
    <div class="max-w-3xl mx-auto space-y-8">
      <div
        class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-emerald-500/10 border border-emerald-500/20 text-emerald-400 text-xs font-medium">
        <span class="relative flex h-2 w-2">
          <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"></span>
          <span class="relative inline-flex rounded-full h-2 w-2 bg-emerald-500"></span>
        </span>
        Public Beta
      </div>

      <h1 class="text-5xl sm:text-6xl md:text-7xl font-bold text-white tracking-tight leading-tight drop-shadow-lg">
        One control center for agents <br class="hidden sm:block" />
        <span class="text-slate-400">running everywhere.</span>
      </h1>

      <p class="text-xl text-slate-300 max-w-xl mx-auto leading-relaxed font-light drop-shadow-md">
        Command AI agents that work across all your machines and workspaces
      </p>

      <p class="text-sm sm:text-base text-slate-400 max-w-xl mx-auto leading-relaxed">
        Let agents run the jobs while you stay focused on decisions.
      </p>

      <div class="flex flex-col sm:flex-row items-center justify-center gap-4 pt-8">
        <button onclick="scrollToAuth('register')"
          class="px-10 py-4 rounded-full bg-white text-slate-900 font-semibold text-base hover:bg-slate-200 transition-all hover:scale-105 active:scale-95 shadow-xl shadow-white/10">
          Get Started
        </button>
      </div>
    </div>
  </section>

  <!-- Features: Minimal Grid -->
  <section class="py-8 px-6 border-t border-white/5 bg-slate-900/40 backdrop-blur-sm relative z-20">
    <div class="max-w-5xl mx-auto">
      <div class="grid sm:grid-cols-2 lg:grid-cols-4 gap-8 lg:gap-12">
        <!-- Feature 1 -->
        <div class="space-y-3">
          <div
            class="w-12 h-12 flex items-center justify-center rounded-full bg-emerald-500/10 text-emerald-400 mb-2 border border-emerald-500/20">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                d="M13 10V3L4 14h7v7l9-11h-7z" />
            </svg>
          </div>
          <h3 class="text-lg font-medium text-slate-200">Drive results, not just chats</h3>
          <p class="text-sm text-slate-400 leading-relaxed">
            Talk to agents like humans that take action on your behalf on remote computers or directories.
          </p>
        </div>

        <!-- Feature 2 -->
        <div class="space-y-3">
          <div
            class="w-12 h-12 flex items-center justify-center rounded-full bg-blue-500/10 text-blue-400 mb-2 border border-blue-500/20">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
            </svg>
          </div>
          <h3 class="text-lg font-medium text-slate-200">Your agents, your control</h3>
          <p class="text-sm text-slate-400 leading-relaxed">
            Run your own agents on your own infrastructure. Full ownership, no vendor lock-in, complete privacy.
          </p>
        </div>

        <!-- Feature 3 -->
        <div class="space-y-3">
          <div
            class="w-12 h-12 flex items-center justify-center rounded-full bg-amber-500/10 text-amber-400 mb-2 border border-amber-500/20">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" />
            </svg>
          </div>
          <h3 class="text-lg font-medium text-slate-200">Alerts when it really matters</h3>
          <p class="text-sm text-slate-400 leading-relaxed">
            Voice notifications, priorities, and urgent flags to make sure critical events never get buried.
          </p>
        </div>

        <!-- Feature 4 -->
        <div class="space-y-3">
          <div
            class="w-12 h-12 flex items-center justify-center rounded-full bg-purple-500/10 text-purple-400 mb-2 border border-purple-500/20">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z" />
            </svg>
          </div>
          <h3 class="text-lg font-medium text-slate-200">Stay connected</h3>
          <p class="text-sm text-slate-400 leading-relaxed">
            Talk to your agents from mobile, tablet, or computer. Access your control center from anywhere.
          </p>
        </div>
      </div>
      <div class="mt-10 text-center">
        <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-emerald-500/5 border border-emerald-500/20">
          <svg class="w-4 h-4 text-emerald-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
          </svg>
          <p class="text-sm text-emerald-400/90">
            Only you and your agents can read message contents; everything is end-to-end encrypted.
          </p>
        </div>
      </div>
    </div>
  </section>


  <!-- Auth Section: Clean & Simple -->
  <section id="auth-section" class="py-8 px-6 border-t border-white/5 bg-slate-900/60 backdrop-blur-md relative z-20">
    <div class="max-w-sm mx-auto">
      <div class="text-center mb-8">
        <h2 id="authHeading" class="text-2xl font-medium text-white"></h2>
      </div>

      <% if (typeof error !=='undefined' && error) { %>
        <div class="bg-red-500/10 border border-red-500/20 text-red-400 px-4 py-3 rounded-lg mb-6 text-sm text-center">
          <%= error %>
        </div>
        <% } %>

          <!-- Login Form -->
          <form id="loginForm" class="space-y-4" action="/login" method="POST">
            <input type="hidden" name="_csrf" value="<%= csrfToken %>">

            <!-- Google Sign-In -->
            <a href="/auth/google"
              class="w-full py-3.5 rounded-lg text-sm font-medium bg-slate-800/50 hover:bg-slate-700/50 text-white border border-white/10 transition-all shadow-lg flex items-center justify-center gap-3">
              <svg class="w-5 h-5" viewBox="0 0 24 24">
                <path fill="#4285F4"
                  d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" />
                <path fill="#34A853"
                  d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" />
                <path fill="#FBBC05"
                  d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" />
                <path fill="#EA4335"
                  d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" />
              </svg>
              Sign in with Google
            </a>

            <!-- Divider -->
            <div class="relative my-4">
              <div class="absolute inset-0 flex items-center">
                <div class="w-full border-t border-white/10"></div>
              </div>
              <div class="relative flex justify-center text-xs">
                <span class="px-2 bg-slate-900/60 text-slate-400">or sign in with email</span>
              </div>
            </div>

            <input id="loginEmail" name="email" type="email" required
              class="w-full px-4 py-3.5 rounded-lg bg-slate-800/50 border border-white/10 text-white placeholder-slate-500 focus:outline-none focus:border-slate-400 transition-colors text-sm backdrop-blur-sm"
              placeholder="Email address" value="<%= typeof email !== 'undefined' ? email : '' %>">

            <input id="loginPassword" name="password" type="password" required
              class="w-full px-4 py-3.5 rounded-lg bg-slate-800/50 border border-white/10 text-white placeholder-slate-500 focus:outline-none focus:border-slate-400 transition-colors text-sm backdrop-blur-sm"
              placeholder="Password">

            <button id="loginTab" type="submit"
              class="w-full py-3.5 rounded-lg text-sm font-medium bg-white hover:bg-slate-200 text-slate-900 border border-white/5 transition-all shadow-lg">
              Sign In
            </button>

            <div class="text-center pt-2">
              <button type="button" onclick="showRegisterForm()"
                class="text-sm text-slate-400 hover:text-white transition-colors">
                Need an account?
              </button>
            </div>
          </form>

          <!-- Register Form -->
          <form id="registerForm" class="space-y-4 hidden" action="/register" method="POST">
            <input type="hidden" name="_csrf" value="<%= csrfToken %>">

            <input id="registerEmail" name="email" type="email" required
              class="w-full px-4 py-3.5 rounded-lg bg-slate-800/50 border border-white/10 text-white placeholder-slate-500 focus:outline-none focus:border-slate-400 transition-colors text-sm backdrop-blur-sm"
              placeholder="Email address">

            <input id="registerPassword" name="password" type="password" required minlength="8"
              class="w-full px-4 py-3.5 rounded-lg bg-slate-800/50 border border-white/10 text-white placeholder-slate-500 focus:outline-none focus:border-slate-400 transition-colors text-sm backdrop-blur-sm"
              placeholder="Password (min 8 chars)">

            <input id="confirmPassword" name="confirmPassword" type="password" required minlength="8"
              class="w-full px-4 py-3.5 rounded-lg bg-slate-800/50 border border-white/10 text-white placeholder-slate-500 focus:outline-none focus:border-slate-400 transition-colors text-sm backdrop-blur-sm"
              placeholder="Confirm password">

            <!-- Terms of Service Agreement -->
            <div class="bg-amber-900/30 border border-amber-500/30 rounded-lg p-3">
              <div class="flex items-start gap-3">
                <input id="agreeTermsLanding" name="agreeTerms" type="checkbox" required
                  class="mt-0.5 h-4 w-4 rounded border-amber-500/50 bg-slate-800 text-amber-500 focus:ring-amber-500 focus:ring-offset-0 cursor-pointer">
                <label for="agreeTermsLanding" class="text-xs text-slate-300 cursor-pointer">
                  <span class="text-amber-400 font-medium">‚ö†Ô∏è Notice:</span> By registering, I agree to the
                  <button type="button" onclick="showModal('terms')"
                    class="text-amber-400 hover:text-amber-300 underline">Terms of Service</button>
                  and <button type="button" onclick="showModal('privacy')"
                    class="text-amber-400 hover:text-amber-300 underline">Privacy Policy</button>.
                </label>
              </div>
            </div>

            <button id="registerTab" type="submit"
              class="w-full py-3.5 rounded-lg text-sm font-medium bg-white hover:bg-slate-200 text-slate-900 border border-white/5 transition-all shadow-lg">
              Create Account
            </button>

            <!-- Divider -->
            <div class="relative my-4">
              <div class="absolute inset-0 flex items-center">
                <div class="w-full border-t border-white/10"></div>
              </div>
              <div class="relative flex justify-center text-xs">
                <span class="px-2 bg-slate-900/60 text-slate-400">or sign up with</span>
              </div>
            </div>

            <!-- Google Sign-Up -->
            <a href="/auth/google"
              class="w-full py-3.5 rounded-lg text-sm font-medium bg-slate-800/50 hover:bg-slate-700/50 text-white border border-white/10 transition-all shadow-lg flex items-center justify-center gap-3">
              <svg class="w-5 h-5" viewBox="0 0 24 24">
                <path fill="#4285F4"
                  d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" />
                <path fill="#34A853"
                  d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" />
                <path fill="#FBBC05"
                  d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" />
                <path fill="#EA4335"
                  d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" />
              </svg>
              Sign up with Google
            </a>

            <div class="text-center pt-2">
              <button type="button" onclick="showLoginForm()"
                class="text-sm text-slate-400 hover:text-white transition-colors">
                Already have an account?
              </button>
            </div>

            <p class="text-center text-xs text-slate-500 mt-4">
              By signing up you agree to our <button type="button" onclick="showModal('terms')"
                class="text-slate-400 hover:text-white underline">Terms</button>
            </p>

            <p class="text-center text-xs text-slate-500 mt-2">
              <svg class="inline-block w-3 h-3 mr-1 text-emerald-400" fill="none" stroke="currentColor"
                viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
              </svg>
              Email verification required
            </p>
          </form>
    </div>
  </section>

  <!-- Getting Started Slides Section -->
  <section class="border-t border-white/5 bg-[#0f172a] relative z-20">
    <div class="px-6 text-center max-w-5xl mx-auto py-16">
        <h2 class="text-3xl sm:text-4xl font-bold text-white mb-4">Get started in seconds.</h2>
        <p class="text-lg text-slate-400">From zero to your first agent in three simple steps.</p>
    </div>

    <!-- Slide 1: End Result Preview -->
    <div class="min-h-[80vh] flex items-center justify-center py-16 px-6">
        <div class="max-w-4xl w-full">
            <div class="flex items-center gap-4 mb-8">
                <div class="w-12 h-12 rounded-full bg-emerald-500/20 border border-emerald-500/50 flex items-center justify-center text-emerald-400 font-bold text-xl">‚úì</div>
                <div>
                    <h3 class="text-2xl font-bold text-white">This is what you'll get</h3>
                    <p class="text-slate-400">Your personal AI agent council, ready to collaborate with you.</p>
                </div>
            </div>
            <div class="relative aspect-[16/10] w-full rounded-2xl overflow-hidden border border-emerald-500/30 shadow-[0_0_50px_-12px_rgba(16,185,129,0.3)] bg-slate-950">
                <!-- Mini Dashboard Preview -->
                <div class="absolute inset-0 flex flex-col p-4 bg-[#0f172a]">
                    <!-- Header -->
                    <nav class="flex items-center justify-between mb-4 border-b border-white/5 pb-4">
                        <div class="flex items-center gap-3">
                            <div class="w-8 h-8 rounded-full bg-slate-900 border border-emerald-500/20 flex items-center justify-center text-emerald-500 font-bold">
                               <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" /></svg>
                            </div>
                            <span class="font-bold text-emerald-500 tracking-wider text-sm uppercase">Agent Control Center</span>
                        </div>
                        <div class="flex items-center gap-2 text-[10px] text-slate-400">
                            <span class="px-2 py-1 rounded bg-white/5 border border-white/10 uppercase">Signed in</span>
                        </div>
                    </nav>
                    <div class="grid gap-4 grid-cols-[35fr,65fr] flex-1 overflow-hidden">
                        <!-- Left Panel - Simplified -->
                        <div class="flex flex-col bg-slate-900/50 rounded-xl border border-white/5 overflow-hidden">
                            <div class="p-3 border-b border-white/5">
                                <span class="font-semibold text-white text-sm">Council Chamber</span>
                            </div>
                            <div class="flex-1 relative p-4 flex items-center justify-center">
                                <div class="w-48 h-48 rounded-full border border-white/5 relative">
                                    <div class="absolute inset-0 rounded-full border border-dashed border-white/10 m-6"></div>
                                    <!-- Center You -->
                                    <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-10 h-10 rounded-full border border-emerald-500/30 bg-slate-800 flex items-center justify-center z-10 overflow-hidden shadow-[0_0_15px_rgba(16,185,129,0.2)]">
                                        <div class="w-full h-full opacity-80" style="background: radial-gradient(circle at 30% 30%, #34d399, #065f46);"></div>
                                        <span class="absolute text-[7px] text-white font-bold">YOU</span>
                                    </div>
                                    <!-- Agent dots -->
                                    <div class="absolute top-0 left-1/2 -translate-x-1/2 -mt-2 w-8 h-8 rounded-full bg-gradient-to-br from-cyan-400 to-blue-600 border border-white/20 shadow-lg"></div>
                                    <div class="absolute bottom-8 right-6 w-8 h-8 rounded-full bg-gradient-to-br from-orange-400 to-red-600 border border-white/20 shadow-lg"></div>
                                    <div class="absolute top-8 left-4 w-8 h-8 rounded-full bg-gradient-to-br from-purple-400 to-purple-600 border border-white/20 shadow-lg"></div>
                                </div>
                            </div>
                        </div>
                        <!-- Right Panel - Chat -->
                        <div class="flex flex-col bg-slate-900/50 rounded-xl border border-white/5 overflow-hidden">
                            <div class="p-3 border-b border-white/5 flex items-center gap-3">
                                <div class="w-8 h-8 rounded-full bg-gradient-to-br from-cyan-400 to-blue-600 border border-white/20 shadow-lg"></div>
                                <div>
                                    <h3 class="text-xs font-semibold text-white">System Architect</h3>
                                    <span class="text-[9px] text-slate-400">Active now</span>
                                </div>
                            </div>
                            <div class="flex-1 p-4 space-y-3 overflow-hidden">
                                <div class="flex gap-2">
                                    <div class="w-5 h-5 rounded-full bg-gradient-to-br from-cyan-400 to-blue-600 flex-shrink-0 mt-1"></div>
                                    <div class="bg-slate-800/50 rounded-lg p-2 text-[10px] text-slate-300 max-w-[80%]">
                                        Ready to assist! I've analyzed your project structure and have some optimization suggestions...
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Glowing badge -->
                <div class="absolute top-4 right-4 z-10 px-3 py-1.5 rounded-full bg-emerald-500/20 border border-emerald-500/50 text-emerald-400 text-xs font-medium backdrop-blur">
                    ‚ú® Your Dashboard
                </div>
            </div>
        </div>
    </div>

    <!-- Slide 2: Copy the Script -->
    <div class="min-h-[70vh] flex items-center justify-center py-16 px-6 border-t border-white/5">
        <div class="max-w-4xl w-full">
            <div class="flex items-center gap-4 mb-8">
                <div class="w-12 h-12 rounded-full bg-slate-800 border border-white/20 flex items-center justify-center text-white font-bold text-xl">1</div>
                <div>
                    <h3 class="text-2xl font-bold text-white">Copy the setup script</h3>
                    <p class="text-slate-400">Click the button in your dashboard to copy the agent script.</p>
                </div>
            </div>
            <div class="relative rounded-2xl overflow-hidden border border-white/10 shadow-xl bg-slate-950 p-8">
                <!-- Simulated UI showing the copy button -->
                <div class="bg-slate-900/80 rounded-xl border border-white/10 p-6 max-w-lg mx-auto">
                    <div class="flex items-center gap-3 mb-4">
                        <svg class="w-6 h-6 text-emerald-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4" />
                        </svg>
                        <span class="text-white font-semibold">Setup Script</span>
                    </div>
                    <div class="bg-slate-950 rounded-lg border border-white/10 p-4 font-mono text-sm">
                        <div class="flex items-center justify-between">
                            <code class="text-emerald-400 text-xs overflow-hidden whitespace-nowrap">curl -sL https://chatmcp.space/s/abc123 | bash</code>
                            <button class="ml-4 px-4 py-2 bg-emerald-500 hover:bg-emerald-400 text-slate-900 rounded-lg text-sm font-bold flex items-center gap-2 transition-colors shadow-lg shadow-emerald-500/20">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                                </svg>
                                Copy
                            </button>
                        </div>
                    </div>
                    <p class="text-slate-500 text-xs mt-3 text-center">This script is unique to your account</p>
                </div>
                <!-- Animated cursor click effect -->
                <div class="absolute bottom-12 right-1/3 pointer-events-none">
                    <div class="w-8 h-8 rounded-full bg-white/20 animate-ping"></div>
                    <svg class="w-6 h-6 text-white absolute top-1 left-1 drop-shadow-lg" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M13.64 21.97C13.14 22.21 12.54 22 12.31 21.5L10.13 16.76L7.62 18.78C7.45 18.92 7.24 19 7.02 19C6.55 19 6.16 18.61 6.16 18.14V5.51C6.16 5.18 6.34 4.88 6.64 4.73C6.94 4.58 7.3 4.61 7.56 4.81L18.56 13.71C18.79 13.89 18.91 14.17 18.89 14.46C18.87 14.75 18.71 15.01 18.46 15.16L14.84 17.35L16.94 21.89C17.08 22.2 17.06 22.56 16.88 22.85C16.7 23.14 16.39 23.32 16.05 23.32L14.05 23.32C13.72 23.32 13.42 23.14 13.25 22.85L13.64 21.97Z"/>
                    </svg>
                </div>
            </div>
        </div>
    </div>

    <!-- Slide 3: Paste in Terminal -->
    <div class="min-h-[70vh] flex items-center justify-center py-16 px-6 border-t border-white/5">
        <div class="max-w-4xl w-full">
            <div class="flex items-center gap-4 mb-8">
                <div class="w-12 h-12 rounded-full bg-slate-800 border border-white/20 flex items-center justify-center text-white font-bold text-xl">2</div>
                <div>
                    <h3 class="text-2xl font-bold text-white">Paste in your terminal</h3>
                    <p class="text-slate-400">Open any terminal and paste the script. It sets everything up automatically.</p>
                </div>
            </div>
            <div class="relative rounded-2xl overflow-hidden border border-white/10 shadow-xl bg-slate-950">
                <!-- Terminal Window -->
                <div class="bg-slate-900 border-b border-white/10 px-4 py-3 flex items-center gap-2">
                    <div class="flex gap-1.5">
                        <div class="w-3 h-3 rounded-full bg-red-500/80"></div>
                        <div class="w-3 h-3 rounded-full bg-yellow-500/80"></div>
                        <div class="w-3 h-3 rounded-full bg-green-500/80"></div>
                    </div>
                    <span class="text-slate-400 text-sm ml-4 font-mono">bash ‚Äî 80x24</span>
                </div>
                <div class="p-6 font-mono text-sm leading-relaxed bg-[#0d1117]">
                    <div class="text-slate-500">user@laptop:~$</div>
                    <div class="flex items-center gap-2 mt-1">
                        <span class="text-emerald-400">curl -sL https://chatmcp.space/s/abc123 | bash</span>
                        <span class="w-2 h-5 bg-emerald-400 animate-pulse"></span>
                    </div>
                    <div class="mt-4 text-slate-400">
                        <div>‚†ã Downloading agent configuration...</div>
                    </div>
                </div>
            </div>
            <div class="mt-6 flex items-center justify-center gap-2 text-slate-500 text-sm">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                Works on Linux, macOS, and WSL
            </div>
        </div>
    </div>

    <!-- Slide 4: Run agent-cli.sh -->
    <div class="min-h-[70vh] flex items-center justify-center py-16 px-6 border-t border-white/5">
        <div class="max-w-4xl w-full">
            <div class="flex items-center gap-4 mb-8">
                <div class="w-12 h-12 rounded-full bg-slate-800 border border-white/20 flex items-center justify-center text-white font-bold text-xl">3</div>
                <div>
                    <h3 class="text-2xl font-bold text-white">Run agent-cli.sh</h3>
                    <p class="text-slate-400">Launch the CLI and watch your agents come to life!</p>
                </div>
            </div>
            <div class="relative rounded-2xl overflow-hidden border border-white/10 shadow-xl bg-slate-950">
                <!-- Terminal Window -->
                <div class="bg-slate-900 border-b border-white/10 px-4 py-3 flex items-center gap-2">
                    <div class="flex gap-1.5">
                        <div class="w-3 h-3 rounded-full bg-red-500/80"></div>
                        <div class="w-3 h-3 rounded-full bg-yellow-500/80"></div>
                        <div class="w-3 h-3 rounded-full bg-green-500/80"></div>
                    </div>
                    <span class="text-slate-400 text-sm ml-4 font-mono">bash ‚Äî 80x24</span>
                </div>
                <div class="p-6 font-mono text-sm leading-relaxed bg-[#0d1117]">
                    <div class="text-slate-500">‚ùØ <span class="text-emerald-400">bash agent-cli.sh</span></div>
                    <div class="mt-4 text-cyan-400">
                        <div>‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó</div>
                        <div>‚ïë&nbsp;&nbsp;ü§ñ Agent Messaging Platform&nbsp;&nbsp;‚ïë</div>
                        <div>‚ïë&nbsp;&nbsp;Manage your AI agents&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;‚ïë</div>
                        <div>‚ïë&nbsp;&nbsp;Version: 1.1.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;‚ïë</div>
                        <div>‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù</div>
                    </div>
                    <div class="mt-3 text-white">Found 2 existing agent(s)</div>
                    <div class="mt-3 text-slate-400">What would you like to do?</div>
                    <div class="mt-2 space-y-1">
                        <div class="text-emerald-400">‚û§ üÜï Create New Agent</div>
                        <div class="text-white pl-4">‚ñ∂Ô∏è&nbsp; Continue Existing Agent</div>
                        <div class="text-white pl-4">üìä View Agent Status</div>
                        <div class="text-white pl-4">‚öôÔ∏è&nbsp; Manage Autostart</div>
                        <div class="text-white pl-4">‚ùå Exit</div>
                    </div>
                </div>
            </div>
            <div class="mt-8 text-center">
                <p class="text-emerald-400 text-lg font-medium mb-4">üéâ That's it! You're ready to chat with your agents.</p>
                <a href="#auth-section" class="inline-block px-8 py-3 bg-emerald-500 hover:bg-emerald-400 text-slate-900 rounded-lg font-bold transition-colors shadow-lg shadow-emerald-500/20">
                    Get Started Free
                </a>
            </div>
        </div>
    </div>
  </section>

  <!-- Minimal Footer -->
  <footer class="py-12 px-6 border-t border-white/5 mt-auto bg-slate-950/50 backdrop-blur-md">
    <div class="max-w-5xl mx-auto flex flex-col sm:flex-row items-center justify-between gap-6 text-sm text-slate-500">
      <span>¬© 2026 ChatMCPSpace</span>

      <div class="flex items-center gap-6">
        <button onclick="showModal('terms')" class="hover:text-slate-300 transition-colors">Terms</button>
        <button onclick="showModal('privacy')" class="hover:text-slate-300 transition-colors">Privacy</button>
        <a href="mailto:im@chatmcp.space" class="hover:text-slate-300 transition-colors">Contact</a>
      </div>
    </div>
  </footer>
</div>

<!-- Single Modal -->
<div id="modal" class="fixed inset-0 z-[100] hidden items-center justify-center p-4">
  <div class="absolute inset-0 bg-black/90 backdrop-blur-sm transition-opacity" onclick="closeModal()"></div>
  <div
    class="relative bg-slate-900 border border-white/10 p-8 max-w-md w-full rounded-xl transform transition-all scale-100">
    <button onclick="closeModal()" class="absolute top-4 right-4 text-slate-500 hover:text-white transition-colors">
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </button>

    <!-- Info Content -->
    <div id="modalInfo" class="hidden text-left">
      <h3 id="modalTitle" class="text-lg font-medium text-white mb-4"></h3>
      <div id="modalBody" class="text-slate-300 mb-6 text-sm leading-relaxed space-y-3">
        <!-- Content is injected by showModal() -->
      </div>
      <button onclick="closeModal()"
        class="px-6 py-2 rounded-lg text-sm font-medium text-white bg-slate-800 hover:bg-slate-700 border border-white/5 transition-all">
        Close
      </button>
    </div>
  </div>
</div>

<script>
  // Define functions globally
  window.showLoginForm = function () {
    document.getElementById('loginForm').classList.remove('hidden');
    document.getElementById('registerForm').classList.add('hidden');
    document.getElementById('authHeading').textContent = '';
  }

  window.showRegisterForm = function () {
    document.getElementById('registerForm').classList.remove('hidden');
    document.getElementById('loginForm').classList.add('hidden');
    document.getElementById('authHeading').textContent = 'Create an Account';
  }

  window.scrollToAuth = function (type) {
    const authSection = document.getElementById('auth-section');
    if (type === 'register') {
      window.showRegisterForm();
    } else {
      window.showLoginForm();
    }
    authSection.scrollIntoView({ behavior: 'smooth', block: 'center' });
  }

  window.showModal = function (type) {
    const modal = document.getElementById('modal');
    const info = document.getElementById('modalInfo');
    const title = document.getElementById('modalTitle');
    const body = document.getElementById('modalBody');

    info.classList.remove('hidden');

    if (type === 'terms') {
      title.textContent = 'Terms of Use (Summary)';
      body.innerHTML = `
        <p class="text-xs uppercase tracking-wide text-amber-300 mb-1">Beta notice</p>
        <p>
          ChatMCPSpace is currently in <strong>beta</strong>. The service may contain bugs, change without notice,
          experience downtime, or lose data. Do not use it as your only copy of important information.
        </p>
        <p>
          By creating an account or using the site you agree that you are responsible for your own backups and that
          we are not liable for data loss, outages, or issues caused by your agents or integrations, to the extent
          allowed by law.
        </p>
        <p>
          This is only a short summary. Please review the full
          <a href="/terms" class="text-sky-300 underline hover:text-sky-200">Terms of Use</a> before relying on the
          service.
        </p>
      `;
    } else {
      title.textContent = 'Privacy (Summary)';
      body.innerHTML = `
        <p>
          We store your email address, a hashed password, API keys, agent names, and the messages and responses that
          flow between you and your agents. We also collect technical logs such as IP address, request paths, and
          security events to keep the service running safely.
        </p>
        <p>
          Optional features send short notification phrases to Google Cloud Text-to-Speech and may use your browser's
          speech APIs for voice input and playback. Message encryption helpers are available, but you are responsible
          for using them correctly.
        </p>
        <p>
          For details on what we collect, how it is used, and your options, please read the full
          <a href="/privacy" class="text-sky-300 underline hover:text-sky-200">Privacy Policy</a>.
        </p>
      `;
    }

    modal.classList.remove('hidden');
    modal.classList.add('flex');
    document.body.style.overflow = 'hidden';
  }

  window.closeModal = function () {
    const modal = document.getElementById('modal');
    modal.classList.add('hidden');
    modal.classList.remove('flex');
    document.body.style.overflow = '';
  }

  document.addEventListener('DOMContentLoaded', () => {
    // Close modal on Escape
    document.addEventListener('keydown', e => e.key === 'Escape' && window.closeModal());

    // Header scroll
    const header = document.querySelector('header');
    if (header) {
      window.addEventListener('scroll', () => {
        const scrolled = window.scrollY > 20;
        header.classList.toggle('bg-slate-950/80', scrolled);
        header.classList.toggle('backdrop-blur-md', scrolled);
      });
    }

    // Helper function to start countdown on a button
    function startButtonCountdown(button, seconds, originalText) {
      button.disabled = true;
      button.classList.add('opacity-50', 'cursor-not-allowed');
      button.classList.remove('hover:bg-slate-200');

      let remaining = seconds;
      button.textContent = `Wait ${remaining}s`;

      const interval = setInterval(() => {
        remaining--;
        if (remaining <= 0) {
          clearInterval(interval);
          button.textContent = originalText;
          button.disabled = false;
          button.classList.remove('opacity-50', 'cursor-not-allowed');
          button.classList.add('hover:bg-slate-200');
        } else {
          button.textContent = `Wait ${remaining}s`;
        }
      }, 1000);
    }

    // Handle form submission with rate limit handling
    async function handleAuthFormSubmit(form, button, originalText, isRegister = false) {
      const formData = new FormData(form);
      const data = new URLSearchParams(formData);

      try {
        const response = await fetch(form.action, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/x-www-form-urlencoded',
          },
          body: data,
          redirect: 'manual'
        });

        // Check if rate limited
        if (response.status === 429) {
          const result = await response.json();
          const retryAfter = result.error?.retryAfter || 30;
          startButtonCountdown(button, retryAfter, originalText);
          return false;
        }

        // Check for redirect (status 302, 303, etc.) - this means success
        if (response.type === 'opaqueredirect' || response.status === 302 || response.status === 303 || response.status === 301) {
          // For registration, redirect to verify-email-sent; for login, redirect to dashboard
          if (isRegister) {
            window.location.href = '/verify-email-sent';
          } else {
            window.location.href = '/dashboard';
          }
          return true;
        }

        // If we got a 200, it might be the landing page with an error, or a successful redirect
        if (response.status === 200) {
          const contentType = response.headers.get('content-type');
          if (contentType && contentType.includes('text/html')) {
            const html = await response.text();
            // Check if this is an error response (contains error message)
            if (html.includes('bg-red-500') || html.includes('error')) {
              document.open();
              document.write(html);
              document.close();
              return false;
            }
          }
          // If no error, assume success and redirect appropriately
          if (isRegister) {
            window.location.href = '/verify-email-sent';
          } else {
            window.location.href = '/dashboard';
          }
          return true;
        }

        // For any other response, reset the button
        button.textContent = originalText;
        button.disabled = false;
        return false;
      } catch (error) {
        console.error('Form submission error:', error);
        button.textContent = originalText;
        button.disabled = false;
        return false;
      }
    }

    // Login form validation
    const loginForm = document.getElementById('loginForm');
    if (loginForm) {
      loginForm.addEventListener('submit', async function (e) {
        e.preventDefault();

        const email = document.getElementById('loginEmail').value;
        const password = document.getElementById('loginPassword').value;
        const button = document.getElementById('loginTab');
        const originalText = button.textContent;

        if (!email.includes('@')) {
          if (typeof window.showError === 'function') { window.showError('Valid email required'); } else { console.error('Error: Valid email required'); }
          return;
        }
        if (!password) {
          if (typeof window.showError === 'function') { window.showError('Password required'); } else { console.error('Error: Password required'); }
          return;
        }

        try { sessionStorage.setItem('pendingEncryptionPassword', password); } catch (err) { }

        button.textContent = 'Signing in...';
        button.disabled = true;

        await handleAuthFormSubmit(this, button, originalText);
      });
    }

    // Register form validation
    const registerForm = document.getElementById('registerForm');
    if (registerForm) {
      registerForm.addEventListener('submit', async function (e) {
        e.preventDefault();

        const password = document.getElementById('registerPassword').value;
        const confirm = document.getElementById('confirmPassword').value;
        const button = document.getElementById('registerTab');
        const originalText = button.textContent;

        if (password.length < 8) {
          if (typeof window.showError === 'function') { window.showError('Password must be 8+ characters'); } else { console.error('Error: Password must be 8+ characters'); }
          return;
        }
        if (password !== confirm) {
          if (typeof window.showError === 'function') { window.showError('Passwords must match'); } else { console.error('Error: Passwords must match'); }
          return;
        }

        try { sessionStorage.setItem('pendingEncryptionPassword', password); } catch (err) { }

        button.textContent = 'Creating account...';
        button.disabled = true;

        await handleAuthFormSubmit(this, button, originalText, true);
      });
    }
  });
</script>

<style>
  @keyframes spin-slow {
    from {
      transform: rotate(0deg);
    }

    to {
      transform: rotate(360deg);
    }
  }

  .animate-spin-slow {
    animation: spin-slow 120s linear infinite;
  }
</style>